<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="IE=edge" >
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
  <title>Aliplayer Functions</title>
  <link rel="stylesheet" href="https://g.alicdn.com/de/prismplayer/2.9.3/skins/default/aliplayer-min.css" />
  <script type="text/javascript" charset="utf-8" src="https://g.alicdn.com/de/prismplayer/2.9.3/aliplayer-min.js"></script>
</head>
<body>
<div id="player-con"></div>
<script>
  
     var value=String(window.document.URL);
     var index=value.indexOf("?");
     var wo3=value.substring(index+1,value.length);
     let res='';
     var flag='';
     window.onload=function(){
      //步骤一:创建异步对象
var ajax = new XMLHttpRequest();
//步骤二:设置请求的url参数,参数一是请求的类型,参数二是请求的url,可以带参数,动态的传递参数starName到服务端
ajax.open('get','http://localhost:7001/api/thirdparty/eduvod/video/getPlayAuth/'+wo3);
//步骤三:发送请求
ajax.send();
res=ajax.responseText;
//步骤四:注册事件 onreadystatechange 状态改变就会调用
ajax.onreadystatechange = function () {
   if (ajax.readyState==4 &&ajax.status==200) {
    //步骤五 如果能够进到这个判断 说明 数据 完美的回来了,并且请求的页面是存在的
　　　　res=ajax.responseText;
var player=new Aliplayer({
    id: "player-con",
    //  source: "https://outin-553bdd1c296e11eb98d100163e1c955c.oss-cn-shanghai.aliyuncs.com/sv/3a4982a8-177f69700a9/3a4982a8-177f69700a9.mp4",
        // source:res,
    encryptType:'1',
    vid:wo3,
    playauth:res,
    width: "100%",
    height: "600px",
    cover: 'https://img.alicdn.com/tps/TB1EXIhOFXXXXcIaXXXXXXXXXXX-760-340.jpg',
    /* To set an album art, you must set 'autoplay' and 'preload' to 'false' */
    autoplay: false,
    preload: false,
    isLive: false,
    // autoPlayDelay: 5,
    // autoPlayDelayDisplayText: '请等待...'
  }, function (player) {
    console.log("The player is created");
  });
  　　}
    } 
     }
    
    
     
   





  //    var player=new Aliplayer({
  //   id: "player-con",
  //   //  source: "https://outin-553bdd1c296e11eb98d100163e1c955c.oss-cn-shanghai.aliyuncs.com/sv/3a4982a8-177f69700a9/3a4982a8-177f69700a9.mp4",
  //       // source:res,
  //   encryptType:'1',
  //   vid:wo3,
  //   playauth:res,
  //   width: "100%",
  //   height: "600px",
  //   cover: 'https://img.alicdn.com/tps/TB1EXIhOFXXXXcIaXXXXXXXXXXX-760-340.jpg',
  //   /* To set an album art, you must set 'autoplay' and 'preload' to 'false' */
  //   autoplay: false,
  //   preload: false,
  //   isLive: false,
  //   // autoPlayDelay: 5,
  //   // autoPlayDelayDisplayText: '请等待...'
  // }, function (player) {
  //   console.log("The player is created");
  // });
</script>
</body>
</html>
